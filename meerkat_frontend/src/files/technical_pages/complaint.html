<div class="top-bar row">

	<div class="location-box box">
		<a href="#menu-toggle" id="menu-toggle">
		<div class="location-box__label">
			<div>Location:</div>
			<div id="location-title">Not Loaded</div>
		</div>
		<span class="glyphicon glyphicon-chevron-right"></span>
		<span class="glyphicon glyphicon-chevron-left hidden"></span>
		</a>
	</div>
	<div class="tab-title hidden-xs col-sm-5 col-md-6">
		Presenting Complaint
	</div>
	<div id="epi-week-title" class="col-xs-12 col-sm-4 col-md-3 pull-right box ">
		Date not loaded.
	</div>

</div>

<div class="demographics toggled" id="wrapper">

	<div id="sidebar-wrapper" >
		<div id="location-selector" class="location-selector">
			Locations not loaded
		</div>
	</div>

	<div id="page-content-wrapper">

		<div class="row">
			<div class="col-xs-12 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						ICD-10 Chart
					</div>
					<div id="icd-bar-chart" class="chart__content">
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12 col-md-6 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						Presenting Complaint
					</div>
					<div id="complaint-table" class="chart__content">
					
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-md-6 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						ICD-10 Table
					</div>
					<div id="icd-table" class="chart__content">
					
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="breaker"></div>

<!-- Menu Toggle Script -->
<script>
$("#menu-toggle").click(function(e) {
	e.preventDefault();
	$("#wrapper").toggleClass("toggled");
	$(".location-box .glyphicon").toggleClass( "hidden" );
});

$("#epi-week-title").html( "Week "+get_epi_week() + " Â· " + get_date() );



//Every tab needs a draw charts function that is called when loading a new location.
function drawCharts( locID ){

	//Keep week abstracted out of the chart drawing process.
	//In case we want the use to eb able to select the weeks to view.
	var week = (get_epi_week()).toString();

	$.getJSON( api_root+"/aggregate_category/pc/" + locID, function( data ){
		$.getJSON( api_root+"/variables/pc", function( variables ){

			var title = "";
			var dataObject = makeDataObject(data, variables, week, title );
			drawTable( 'complaint-table', dataObject, true, false, 'loadDisease' );

		});
	});

	$.getJSON( api_root+"/aggregate_category/Chapter/" + locID, function( data ){
		$.getJSON( api_root+"/variables/Chapter", function( variables ){

			var title = "";
			var dataObject = stripEmptyRecords( makeDataObject(data, variables, week, title ) );

			drawTable( 'icd-table', dataObject, true, false, 'loadDisease' );
			drawBarChart( 'icd-bar-chart', dataObject, true );

		});
	});

}

</script>

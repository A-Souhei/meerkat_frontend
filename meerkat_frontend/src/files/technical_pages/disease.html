<div class="top-bar row">

	<div class="location-box box">
		<a href="#menu-toggle" id="menu-toggle">
		<div class="location-box__label">
			<div>Location:</div>
			<div id="location-title">Not Loaded</div>
		</div>
		<span class="glyphicon glyphicon-chevron-right"></span>
		<span class="glyphicon glyphicon-chevron-left hidden"></span>
		</a>
	</div>
	<div class="tab-title hidden-xs col-sm-5 col-md-6">
		<span id="diseaseTitle">Not loaded</span>
	</div>
	<div id="epi-week-title" class="col-xs-12 col-sm-4 col-md-3 pull-right box ">
		Date not loaded.
	</div>
</div>

<div class="disease toggled" id="wrapper">

	<div id="sidebar-wrapper" >
		<div id="location-selector" class="location-selector">
			Locations not loaded
		</div>
	</div>

	<div id="page-content-wrapper">
		<div class="row">
			<div class="col-xs-12 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						Information
					</div>
					<div class="chart__content">
						<div class="diseaseInfo col-xs-12 col-sm-4">
							<div class="diseaseInfo__title">
								Classification
							</div>
							<div id="classification" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12 col-sm-4">
							<div class="diseaseInfo__title">
								Source
							</div>
							<div id="source" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12 col-sm-4">
							<div class="diseaseInfo__title">
								Alerts
							</div>
							<div id="diseaseAlerts" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12">
							<div class="diseaseInfo__title ">
								Case Definition
							</div>
							<div id="caseDefinition" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12">
							<div class="diseaseInfo__title">
								Risk Factor(s)
							</div>
							<div id="riskFactor" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12">
							<div class="diseaseInfo__title">
								Signs/Symptom(s)
							</div>
							<div id="signsSymptoms" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
						<div class="diseaseInfo col-xs-12">
							<div class="diseaseInfo__title">
								Labs/Diagnostics
							</div>
							<div id="labsDiagnostics" class="diseaseInfo__content">
								Data not loaded.
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						Time of reports
					</div>
					<div class="chart__content">
						<div id="time-chart" class="chart">
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12 less-padding-col">
				<div class="chart box">
					<div class="chart__heading">
						Location of reports
					</div>
					<div id="disease-map" class="chart__content map">
						
					</div>
				</div>
			</div>
		</div>

	</div>
</div>
<div class="breaker"></div>

<!-- Menu Toggle Script -->
<script>

$("#menu-toggle").click(function(e) {
	e.preventDefault();
	$("#wrapper").toggleClass("toggled");
	$(".location-box .glyphicon").toggleClass( "hidden" );
	
	//Hack to resize highcharts upon side bar toggle. Call window resize() upon transition finish.
	var transitionEvent = whichTransitionEvent();
	transitionEvent && document.getElementById('sidebar-wrapper').addEventListener(transitionEvent, function() {
		$(window).resize();
	});
});

$("#epi-week-title").html( "Week " + get_epi_week() + " Â· " + get_date() );

var disease = 1;

function loadDiseaseContent( varID, locID ){

	disease = varID;

	drawMap( varID, 'disease-map' );	

	$.getJSON( api_root + '/variable/' + varID, function( data ){

		console.log(data);

		$('#diseaseTitle').text( data.name );
		$('#classification').text( data.classification_casedef );
		$('#source').text( data.source );
		$('#diseaseAlerts').text( data.alert_desc );
		$('#caseDefinition').text( data.case_def);
		$('#riskFactor').text( data.risk_factors );
		$('#signsSymptoms').text( data.symptoms);
		$('#labsDiagnostics').text( data.labs_diagnostics );


	});

}

//Every tab needs a draw charts function that is called when loading a new location.
function drawCharts( locID ){
	//Keep week abstracted out of the chart drawing process.
	//In case we want the use to eb able to select the weeks to view.
	var week = (get_epi_week()-1).toString();
	drawTimeChart( disease, locID, 'time-chart' );

}


</script>
